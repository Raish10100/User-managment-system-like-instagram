<!DocType html>
<html>
    <head>
        <title>Reset page</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
    <h1 id="instaPage">Instagram </h1>
        
<div class="container">
    <h1>Instagram Reset Password</h1>

    <form action="">
        <div class="form-group">
            <label for="">Password</label>
            <input type="number" name="password" id="password" placeholder="••••••••">
        </div> 
        <div class="form-group">
            <label for="">Confirm Password</label>
            <input type="number" name="confirm password" id="confirmPassword" placeholder="Enter confirm password">
        </div>
        <a href="" id="submit" class="btn">Submit</a>

        <div class="links">
            <a href="./Register.html">SignUp</a>
            <a href="./Login.html">Log In</a>
        </div>
    </form>
</div>

    </body>

    <script>
        const submitResetPassword = document.getElementById('submit')
        
        submitResetPassword.addEventListener('click',(event) => {
            event.preventDefault()
            
            const password = document.getElementById('password').value 
            const confirmPassword = document.getElementById('confirmPassword').value

if(!password || !confirmPassword){
    return alert("Both field are required !!!")
}
if(password !== confirmPassword){
    return alert("password and confirm password must be same !!")
}

  const userData = {
    password: password,
    confirmPassword: confirmPassword
  }          
  
  
    resetPassword(userData)
})

const resetPassword =  async (payload) => {
    
      const searchParams = new URLSearchParams(window.location.search);
      const param1Value = searchParams.get('param1')
      console.log(param1Value) 
    try {
        const resp = await fetch(`http://localhost:50001/api/auth/reset-password/${param1Value}`,{
            method:"POST",
            headers:{"Content-Type":"application/json"},
            body:JSON.stringify(payload)
        })

        const data = await resp.json();
        console.log(data)
        window.location.href="http://localhost:5500/Assignment/client/login.html"

    } catch (error) {
     console.log(error.message)   
    }
}


    </script>
</html>